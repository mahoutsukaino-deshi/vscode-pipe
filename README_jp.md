# VSCode Pipe README

VSCode Pipe を使用すると Visual Studio Code からコマンドを実行できます。このときエディタで選択した部分を標準入力としてコマンドに渡します。そして標準出力に出力されたコマンドの実行結果で選択部分を置き換えます。標準エラー出力に出力があった場合は情報メッセージとして表示します。
例えば、エディタの画面で複数行を選択して sort コマンドを実行するとソートされた結果でテキストが置き換わります。grep を実行すると検索の結果にマッチした行だけが表示されます。
自分で作成したプログラムを実行することもできます。標準入力からデータを読み込んで標準出力に出力するようにプログラムを作ってください。

下のキャプチャは実行例です。次の操作を行なっています。

1. メニューに登録されている ls コマンドを実行。
2. ls コマンドの結果を大文字に変換。
3. 画面に数字を入力し、sort | uniq を実行。
4. wc -l コマンドを実行して、4 の結果の行数を表示。

![](img/screen.gif)

## 機能

- 起動方法
  コマンドパレットで"VSCode Pipe"を選択してください。
  下記のショートカットでも起動することができます。
  MAC: Command + Option + P
  Windows: Ctrl + Alt + P

- メニューからコマンドを選択して実行
  よく使用するコマンドをメニューに登録することができます。setting.json の"vscodePipe.menus"でメニューに追加できます。

- コマンドの実行
  ”Run Command"を選択すると、コマンドを入力して実行することができます。

- 標準出力バッファサイズ
  コマンドを実行すると下記のエラーが発生することがあります。

  ```
  Error: maxBuffer exceeded.
  ```

  このエラーが発生した場合はバッファサイズを大きくすることで回避できます。バッファサイズは settings.json の"vscodePipe.maxBuffer"で指定することができます。

## 拡張機能の設定

setting.json で下記の設定が可能です。

- vscodePipe.menus

  メニューの登録をします。

  - label
    コマンドの名前を指定します。
  - description
    実際に起動するコマンドを指定します。

  ```json
  "vscodePipe.menus": [
    {
      "label": "upper case",
      "description": "tr '[:lower:]' '[:upper:]' "
    },
    {
      "label": "ls",
      "description": "ls -l"
    }
  ]
  ```

- vscodePipe.maxBuffer

  標準出力の最大バッファいサイズを指定します。 初期値は 1048576 となっています。

  ```json
  "vscodePipe.maxBuffer": 1048576
  ```

## リリースノート

### 0.0.1

初回リリース。
